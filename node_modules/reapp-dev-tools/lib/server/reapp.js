'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.init = init;
exports.config = config;
exports.callback = callback;
exports.isStyleguideActive = isStyleguideActive;
exports.getStyleguideInfo = getStyleguideInfo;

var proxy = require('./proxy');
var styleguide = require('./styleguide');

var serverCfg;
var cwd;

function init(_cwd, _serverCfg) {
    cwd = _cwd;
    serverCfg = _serverCfg;

    styleguide.init(cwd, process.argv);
}

function config() {
    var cfg = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

    return Object.assign({}, cfg, {
        proxy: proxy.table(serverCfg)
    });
}

function callback(err) {
    if (err) {
        console.log(err);
    }
    console.log('Listening at localhost:' + serverCfg.port);
    proxy.run(cwd, serverCfg);
}

function isStyleguideActive() {
    return styleguide.isActive();
}

function getStyleguideInfo() {
    return styleguide.getInfo();
}